<!DOCTYPE html>
<html lang="fr">
    <head>
        <title>Rendez-vous</title>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
        <link rel="stylesheet" href="../css/rendez_vous.css">
        <link rel="stylesheet" href="../css/central.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Corben&family=Fira+Sans&family=Inter+Tight:ital,wght@1,300&family=Rubik:ital@1&display=swap" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    </head>
    <body>
        <nav> <!-- Barre de navigation  -->
            <div class="logo"><a href="/html/index.html"><img src="../img/logo-nav.png" width="110px" alt="LOGO LSPD"></a></div>
            <ul>
                <li><a class="links" href="#">GALERIE</a></li>
                <li><a class="links" href="#">LSPD FAQ</a></li>
                <li><a class="links" href="#">LSPD EVENTS</a></li>
                <li><a class="links" href="#">RENDEZ-VOUS</a></li>   
            </ul>
            <a class="link-button" href="/html/formulaire.html"><button>Postuler</button></a>
        </nav>
        <div class="container mt-auto">
            <h1>Prise de rendez-vous</h1>
            <form onsubmit="sendContact(event)">
                <div class="mb-3">
                  <label for="nameInput" class="form-label">Nom et Prénom</label>
                  <input type="text" class="form-control" id="nameInput">
                </div>
                <div class="mb-3">
                    <label for="dispoInput" class="form-label">vos disponibilités</label>
                    <input type="date" class="form-control" id="dispoInput">
                  </div>
                <div class="mb-3">
                  <label for="sujetpoInput" class="form-label">Sujet de la demande de prise d'un rendez-vous</label>
                  <textarea class="form-control" id="sujetInput" rows="3"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">envoyer</button>
            </form>
        </div>
          <script>
            async function sendContact(ev) {
              ev.preventDefault();
              const sendername = document
                .getElementById('nameInput').value;
              const senderdispo = document
                .getElementById('dispoInput').value;
                const sendersujet = document
                .getElementById('sujetInput').value;
              const webhookBody = {
                embeds: [{
                  title: 'Prise de rendez-vous',
                  fields: [{
                      name: 'Nom et prénom',
                      value: sendername
                    },
                    {
                      name: 'disponibilité(s)',
                      value: senderdispo
                    },
                    {
                      name: 'sujet de la demande',
                      value: sendersujet
                    }
                  ]
                }],
              };
              const webhookUrl = 'https://discord.com/api/webhooks/1155931411140849704/7Ho172871rGmn4X4jgjloE4T1kDzHclKqZMJamVxDPxriZpdRY7U7Cqc4j1WMvN5wYKr';
              const response = await fetch(webhookUrl, {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify(webhookBody),
              });
              if (response.ok) {
                alert('Votre demande de rendez-vous à bien été pris en compte!');
              } else {
                alert('Il y a une erreur ! veuillez réessayer plus tard !');
              }
            }
          </script>
    </body>
</html>
